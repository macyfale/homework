# Сети Петри
Сети Петри и их обобщения представляют собой математические модели, построенные в рамках определенной концепции структуризации. Сети Петри — удобный аппарат моделирования параллельных процессов, т.е. процессов, протекающих независимо один от другого.
В сетях Петри условия моделируются позициями, а события — переходами.
В различных расширениях сетей Петри используются графические представления — графы, орграфы, диграфы — в общем виде некоторые сетевые представления.
Сеть Петри состоит из 4-х элементов: 
1.множество позиций P,
2.множество переходов T,
3.входная функция I,
4.выходная функция O.
К настоящему времени арсенал сетей Петри значительно расширился. Кроме временных сетей появились: стохастические сети, в которых задержки являются случайными величинами; функциональные сети — в них задержки определяются как функции некоторых аргументов, например количества меток в каких-либо позициях, состояния некоторых переходов; цветные, или раскрашенные, сети, в которых метки могут быть различных типов, обозначаемых цветами (тип метки может быть использован как аргумент в функциональных сетях).
Итак, достоинства сетей Петри:
— позволяют моделировать параллельные процессы всех типов с учетом возможных конфликтов между ними;
— обладают наглядностью и обеспечивают возможность автоматизированного анализа;
— позволяют переходить от одного уровня детализации описания системы к другому (за счет раскрытия/закрытия переходов).
## Пример 1

Моделирование последовательной обработки запросов сервером базы данных. Сервер находится в состоянии ожидания до тех пор, пока от пользователя не поступит запрос, который он обрабатывает и отправляет результат такой обработки пользователю.
Условиями для такой системы являются:
а) сервер ждет;
б) запрос поступил и ждет;
в) сервер обрабатывает запрос;
г) запрос обработан.
Событиями для этой системы являются:
1.Запрос поступил.
2. Сервер начинает обработку запроса.
3. Сервер заканчивает обработку запроса.
4. Результат обработки отправляется.
## Пример 2

Система автомат-продавец состоит из трех различных автоматов M1, М2 и M3 и двух операторов F1 и F2. Оператор F1 воздействует на автоматы M1 и М2, а оператор F2 – на M1 и М3. Заказы требуют двух стадий обработки. Сначала 
28
они должны быть обработаны автоматом М1, затем автоматом М2 либо
М3. Эта более сложная система будет иметь следующие условия:
а) заказ прибыл и ждет обработки автоматом M1;
б) заказ обработан автоматом M1 и ждет обработки автоматом М2
либо М3;
в) заказ выполнен;
г) автомат М1 не занят;
д) автомат М2 не занят;
е) автомат М3 не занят;
ж) оператор F1 не занят;
з) оператор F2 не занят;
и) автомат M1 находится под воздействием оператора F1,
к) автомат М1 находится под воздействием оператора F2;
л) автомат М2 находится под воздействием оператора F1;
м) автомат М3 находится под воздействием оператора F2.
При этом могут происходить следующие события.
1. Поступление заказа.
2. Оператор F1 начинает выполнение заказа на автомате М1.
3. Оператор F1 закончил выполнение заказа на автомате M1.
4. Оператор F2 начинает выполнение заказа на автомате M1.
5. Оператор F2 закончил выполнение заказа на автомате M1.
6. Оператор F1 начинает выполнение заказа на М2.
7. Оператор F1 закончил выполнение заказа на М2.
8. Оператор F2 начинает выполнение заказа на М3.
9. Оператор F2 закончил выполнение заказа на М3.
10. Заказ посылается на доставку. 
## Пример 3

Оценка эффективности знаний, полученных во сне
Показана принципиальная возможность низкоуровневых исследований процессов, происходящих в мозге во время сна. В частности в работе на основании МРТ коры головного мозга рассчитывались вероятности того, как человек поступит в ситуации, обучение которой он прошёл. Но для правильной оценки таких знаний человека надо поместить в такую ситуацию, где он мог бы их правильно применить, так как знания сна, как уже было сказано выше, откладываются в основном на сверх- и подсознательном уровнях.
## Пример 4

Требуется описать с помощью сети Петри работу группы пользователей на единственной рабочей станции WS при заданных характеристиках потока запросов на пользование WS и характеристиках поступающих задач. 
Здесь переходы связаны со следующими событиями: t1 — поступление запроса на использование WS, t2 — занятие станции,  t3— освобождение станции,  t4— выход обслуженной заявки; позиция p4 используется для отображения состояния WS: если в  p4 имеется метка, то WS свободна и пришедшая заявка вызывает срабатывание перехода t2; пока эта заявка не будет обслужена, метки в  p4 не будет, следовательно, пришедшие в позицию  p1 запросы вынуждены ожидать срабатывания перехода t3.
## Пример 5

Требуется описать с помощью сети Петри процессы возникновения и устранения неисправностей в некоторой технической системе, состоящей из множества однотипных блоков; в запасе имеется один исправный блок; известны статистические данные об интенсивностях возникновения отказов и длительностях таких операций, как поиск неисправностей, замена и ремонт отказавшего блока. Поиск и замену отказавшего блока производит одна бригада, а ремонт замененного блока — другая бригада.
Отметим, что при числе меток в позиции, равном М, можно в ней не ставить М точек, а записать в позиции значение М.
В нашем примере значение М в позиции p2 соответствует числу имеющихся в системе блоков. Переходы отображают следующие события: t1 — отказ блока, t2 — поиск неисправного блока, t3 — его замена,  t4— окончание ремонта.
Очевидно, что при непустой позиции p2 переход t1  срабатывает, но с задержкой, равной вычисленному случайному значению моделируемого отрезка времени между отказами. После выхода маркера t1из  он попадает через p1 в t2 , если имеется метка в позиции p6, это означает, что обслуживающая систему бригада специалистов свободна и может приступить к поиску возникшей неисправности. В переходе  t2 метка задерживается на время, равное случайному значению длительности поиска неисправности. Далее маркер оказывается в p3 и, если имеется запасной блок (маркер в p4), то запускается переход t3, из которого маркеры выйдут в p2,p5  и в p6 через отрезок времени, требуемый для замены блока. После этого в  t4 имитируется восстановление неисправного блока.

